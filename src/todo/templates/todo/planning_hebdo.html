{% extends 'authentication/base.html' %}
{% block content %}
<h2 class="mb-4">üóìÔ∏è Planning de la semaine</h2>
<div id="calendar"></div>

<link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css' rel='stylesheet' />
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js'></script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'timeGridWeek',
      locale: 'fr',
      allDaySlot: false,
      slotMinTime: "07:00:00",
      slotMaxTime: "19:00:00",
events: [
  {% for tache in taches %}
  {
    title: "{{ tache.titre|escapejs }}{% if tache.est_terminee %} ‚úÖ{% endif %}",
    start: "{{ tache.date_planifiee }}T{{ tache.heure_debut|default:'09:00:00' }}",
    end: "{{ tache.date_planifiee }}T{{ tache.heure_fin|default:'10:00:00' }}",
    color: "{% if tache.est_terminee %}green{% elif tache.heure_debut %}orange{% else %}#007bff{% endif %}"
  },
  {% endfor %}
]

    });
    calendar.render();
  });
</script>
{% endblock %}
