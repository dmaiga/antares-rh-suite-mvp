{% extends 'authentication/base.html' %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4" style="margin-top: 2em;">
    <h2 class="mb-0">Dashboard RH</h2>
    <a class="btn btn-primary" href="{% url 'create-user' %}">➕ Créer un utilisateur</a>
</div>



<form method="get" class="mb-4">
    <div class="input-group">
        <input type="text" name="q" class="form-control" placeholder="Rechercher..." value="{{ query }}">
        <button class="btn btn-outline-secondary" type="submit">🔍</button>
    </div>
</form>

<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    {% for user in users %}
    <div class="col">
        <div class="card h-100 shadow-sm border-0">
            {% if user.photo %}
                <img src="{{ user.photo.url }}" class="card-img-top img-fluid" style="height: 200px; object-fit: cover;" alt="Photo de {{ user.get_full_name }}">
            {% else %}
                <img src="https://via.placeholder.com/300x200.png?text=Sans+Photo" class="card-img-top img-fluid" alt="Pas de photo">
            {% endif %}
            <div class="card-body">
                <h5 class="card-title mb-1">{{ user.get_full_name |upper }}</h5>
                <h6 class="card-subtitle text-muted mb-2">@{{ user.username| upper }}</h6>

                <p class="mb-2">
                    <strong>Rôle :</strong> <span class="badge bg-primary">{{ user.role }}</span><br>
                    <strong>Statut :</strong> <span class="badge bg-info text-dark">{{ user.statut }}</span><br>
                    <strong>Téléphone :</strong> {{ user.telephone_pro }}
                </p>

                <div class="d-flex gap-2">
                    <a href="{% url 'user-detail' %}?id={{ user.id }}" class="btn btn-sm btn-outline-primary">👁 Voir</a>
                    <a href="{% url 'edit-user-rh' user.id %}" class="btn btn-sm btn-outline-warning">✏️ Modifier</a>
                </div>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-12">
        <div class="alert alert-info">Aucun utilisateur trouvé.</div>
    </div>
    {% endfor %}
</div>

{% endblock %}
